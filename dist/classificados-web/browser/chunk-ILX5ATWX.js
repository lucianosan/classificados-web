import{$ as A,A as i,Aa as H,B as I,Ba as J,C as O,D as _,Da as L,E as f,Ea as S,I as o,J as c,K as D,N,O as P,P as T,Q as k,S as R,U as V,X as C,_ as j,e as F,ha as $,ja as W,l as u,n as E,o as M,oa as z,pa as B,qa as G,s as a,t as p,u as v,ua as q,v as h,w as g,y as l,z as t}from"./chunk-R7UIGUDC.js";var ee=()=>["/admin/anuncios"];function te(r,n){if(r&1&&(t(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9),o(4),i(),t(5,"div",10),o(6),i()()()()),r&2){let e=n.$implicit,s=f();a(4),c(e),a(2),c(s.counts[e]||0)}}var y=class r{constructor(n){this.listingService=n;this.categories=this.listingService.categories(),this.loadCounts()}categories=[];counts={};async loadCounts(){for(let n of this.categories)try{let e=await F(this.listingService.search(void 0,n,void 0,!1,0,1));this.counts[n]=e.total}catch{this.counts[n]=0}}static \u0275fac=function(e){return new(e||r)(p(S))};static \u0275cmp=v({type:r,selectors:[["ng-component"]],standalone:!1,decls:8,vars:3,consts:[[1,"container","py-3"],[1,"h4","mb-3"],[1,"row","g-3"],["class","col-sm-6 col-md-4 col-lg-3",4,"ngFor","ngForOf"],[1,"mt-3"],[1,"btn","btn-primary",3,"routerLink"],[1,"col-sm-6","col-md-4","col-lg-3"],[1,"card"],[1,"card-body"],[1,"fw-semibold"],[1,"display-6"]],template:function(e,s){e&1&&(t(0,"div",0)(1,"h2",1),o(2,"Admin"),i(),t(3,"div",2),g(4,te,7,2,"div",3),i(),t(5,"div",4)(6,"a",5),o(7,"Gerenciar an\xFAncios"),i()()()),e&2&&(a(4),l("ngForOf",s.categories),a(2),l("routerLink",k(2,ee)))},dependencies:[C,J],styles:[".cards[_ngcontent-%COMP%]{display:grid;gap:1rem}"]})};function ie(r,n){if(r&1&&(t(0,"option",10),o(1),i()),r&2){let e=n.$implicit;l("value",e),a(),c(e)}}function ne(r,n){if(r&1){let e=O();t(0,"tr",11),_("click",function(){let d=E(e).$implicit,m=f();return M(m.view(d.id))}),t(1,"td"),o(2),i(),t(3,"td"),o(4),i(),t(5,"td"),o(6),i(),t(7,"td"),o(8),i(),t(9,"td"),o(10),R(11,"number"),i(),t(12,"td"),o(13),i(),t(14,"td",12)(15,"a",13),_("click",function(d){let m=E(e).$implicit,Q=f();return d.stopPropagation(),M(Q.view(m.id))}),o(16,"Abrir"),i()()()}if(r&2){let e=n.$implicit;a(2),c(e.title),a(2),c(e.category),a(2),c(e.city),a(2),c(e.state),a(2),D("R$ ",V(11,6,e.price,"1.0-2")),a(3),c(e.views)}}var x=class r{constructor(n,e){this.listingService=n;this.router=e;this.categories=this.listingService.categories(),this.load()}items=[];total=0;page=0;size=12;category="";categories=[];load(){this.listingService.search(void 0,this.category||void 0,void 0,!1,this.page,this.size).subscribe(n=>{this.items=n.items,this.total=n.total})}view(n){this.router.navigate(["/item",n])}static \u0275fac=function(e){return new(e||r)(p(S),p(H))};static \u0275cmp=v({type:r,selectors:[["ng-component"]],standalone:!1,decls:28,vars:3,consts:[[1,"container","py-3"],[1,"h4","mb-3"],[1,"row","g-2","mb-2"],[1,"col-md-4"],[1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"table-responsive"],[1,"table","table-striped","table-sm"],["style","cursor:pointer;",3,"click",4,"ngFor","ngForOf"],[3,"value"],[2,"cursor","pointer",3,"click"],[1,"text-end"],[1,"btn","btn-sm","btn-outline-primary",3,"click"]],template:function(e,s){e&1&&(t(0,"div",0)(1,"h2",1),o(2,"An\xFAncios"),i(),t(3,"div",2)(4,"div",3)(5,"select",4),T("ngModelChange",function(m){return P(s.category,m)||(s.category=m),m}),_("change",function(){return s.load()}),t(6,"option",5),o(7,"Todas categorias"),i(),g(8,ie,2,2,"option",6),i()()(),t(9,"div",7)(10,"table",8)(11,"thead")(12,"tr")(13,"th"),o(14,"T\xEDtulo"),i(),t(15,"th"),o(16,"Categoria"),i(),t(17,"th"),o(18,"Cidade"),i(),t(19,"th"),o(20,"Estado"),i(),t(21,"th"),o(22,"Pre\xE7o"),i(),t(23,"th"),o(24,"Visitas"),i(),I(25,"th"),i()(),t(26,"tbody"),g(27,ne,17,9,"tr",9),i()()()()),e&2&&(a(5),N("ngModel",s.category),a(3),l("ngForOf",s.categories),a(19),l("ngForOf",s.items))},dependencies:[C,B,G,z,$,W,j],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle}"]})};var oe=[{path:"",component:y},{path:"anuncios",component:x}],b=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=h({type:r});static \u0275inj=u({imports:[L.forChild(oe),L]})};var K=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=h({type:r});static \u0275inj=u({imports:[A,q,b]})};export{K as AdminModule};
