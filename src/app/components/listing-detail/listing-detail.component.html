<div class="container py-3" *ngIf="listingDetailError">
  <div class="alert alert-danger d-flex justify-content-between align-items-center">
    <span>{{ listingDetailError }}</span>
    <a class="btn btn-sm btn-outline-danger" [routerLink]="['/']">Voltar</a>
  </div>
</div>
<section *ngIf="listing" class="container py-3">
  <div class="d-flex justify-content-between align-items-center mb-2">
    <a class="btn btn-outline-secondary" [routerLink]="['/']">Voltar</a>
  </div>
  <div class="row g-4">
    <div class="col-lg-6" *ngIf="listing.images?.length">
      <img class="img-fluid rounded" [src]="listing.images[selectedImage]" [alt]="listing.title">
      <div class="d-flex gap-2 mt-2">
        <img *ngFor="let img of listing.images; let i = index" [src]="img" (click)="selectImage(i)" [class]="'rounded border ' + (selectedImage===i ? 'border-primary' : 'border-light')" style="width:64px;height:64px;object-fit:cover;cursor:pointer;">
      </div>
    </div>
    <div class="col-lg-6">
      <h2 class="h4 mb-2">{{ listing.title }}</h2>
      <div class="text-muted mb-1">{{ listing.city }} - {{ listing.state }} • {{ listing.views }} visitas</div>
      <div class="price h5 mb-3">R$ {{ listing.price | number:'1.0-2' }}</div>
      <p class="mb-3">{{ listing.description }}</p>
      <div class="d-flex gap-2 mb-3">
        <button class="btn btn-outline-danger" (click)="toggleFav()">{{ isFav() ? 'Remover dos favoritos' : 'Favoritar' }}</button>
        <a *ngIf="listing.contactPhone" class="btn btn-success" [href]="'tel:'+listing.contactPhone"><i class="fa fa-phone"></i> Ligar</a>
        <a *ngIf="listing.contactEmail" class="btn btn-outline-primary" [href]="'mailto:'+listing.contactEmail"><i class="fa fa-envelope"></i> Enviar email</a>
      </div>
    </div>
  </div>
</section>
<section *ngIf="!listing && !listingDetailError" class="container py-3">
  <p class="text-muted">Anúncio não encontrado.</p>
  <a class="btn btn-outline-primary" [routerLink]="['/']">Ir para a Home</a>
</section>
